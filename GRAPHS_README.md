# üìä ECharts –ì—Ä–∞—Ñ–∏–∫–∏ –≤ MapMon v0.5

## –û–±–∑–æ—Ä

–î–æ–±–∞–≤–ª–µ–Ω—ã –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ –≥—Ä–∞—Ñ–∏–∫–∏ –≤—Ä–µ–º–µ–Ω–Ω—ã—Ö —Ä—è–¥–æ–≤ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π zoom –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏–∏ ESP32 —Ç–µ—Ö–Ω–∏–∫–∏. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –±–∏–±–ª–∏–æ—Ç–µ–∫–∞ **ECharts** –¥–ª—è –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–π –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –∏ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üîç **Zoom –∏ –Ω–∞–≤–∏–≥–∞—Ü–∏—è**
- **Zoom –∫–æ–ª–µ—Å–∏–∫–æ–º –º—ã—à–∏** - —É–¥–µ—Ä–∂–∏–≤–∞–π—Ç–µ Ctrl + –∫—Ä—É—Ç–∏—Ç–µ –∫–æ–ª–µ—Å–∏–∫–æ
- **Drag & Pan** - –ø–µ—Ä–µ—Ç–∞—Å–∫–∏–≤–∞–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–∞ –º—ã—à—å—é
- **Touch zoom** - pinch –∂–µ—Å—Ç–∞–º–∏ –Ω–∞ –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞—Ö
- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π reset** - –¥–≤–æ–π–Ω–æ–π –∫–ª–∏–∫ –¥–ª—è —Å–±—Ä–æ—Å–∞

### üìä **4 —Ç–∏–ø–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤**
1. **üìà –°–∫–æ—Ä–æ—Å—Ç—å** (–∫–º/—á) - —Å–∏–Ω–∏–π —Ü–≤–µ—Ç
2. **üå°Ô∏è –¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞** (¬∞C) - –∫—Ä–∞—Å–Ω—ã–π —Ü–≤–µ—Ç  
3. **üîã –ë–∞—Ç–∞—Ä–µ—è** (%) - –∑–µ–ª–µ–Ω—ã–π —Ü–≤–µ—Ç
4. **‚öôÔ∏è RPM** - —Ñ–∏–æ–ª–µ—Ç–æ–≤—ã–π —Ü–≤–µ—Ç

### ‚è∞ **–í—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–∏–∞–ø–∞–∑–æ–Ω—ã**
- **10 –º–∏–Ω—É—Ç** - 20 —Ç–æ—á–µ–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 30 —Å–µ–∫
- **1 —á–∞—Å** - 30 —Ç–æ—á–µ–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 2 –º–∏–Ω
- **6 —á–∞—Å–æ–≤** - 36 —Ç–æ—á–µ–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 10 –º–∏–Ω
- **12 —á–∞—Å–æ–≤** - 36 —Ç–æ—á–µ–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 20 –º–∏–Ω
- **24 —á–∞—Å–∞** - 48 —Ç–æ—á–µ–∫ —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 30 –º–∏–Ω

### üîÑ **Real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è**
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∫–∞–∂–¥—ã–µ **5 —Å–µ–∫—É–Ω–¥**
- –ü–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ –±—Ä–∞—É–∑–µ—Ä–∞
- –ü–ª–∞–≤–Ω—ã–µ –∞–Ω–∏–º–∞—Ü–∏–∏ –ø—Ä–∏ –¥–æ–±–∞–≤–ª–µ–Ω–∏–∏ –Ω–æ–≤—ã—Ö —Ç–æ—á–µ–∫

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞

### –§–∞–π–ª–æ–≤–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞
```
composables/
‚îú‚îÄ‚îÄ useChartData.ts      # –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã–º–∏ –≥—Ä–∞—Ñ–∏–∫–æ–≤
‚îú‚îÄ‚îÄ useApi.ts           # API –∫–ª–∏–µ–Ω—Ç (—Å—É—â–µ—Å—Ç–≤—É—é—â–∏–π)

components/
‚îú‚îÄ‚îÄ ChartComponent.vue  # –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∫–æ–º–ø–æ–Ω–µ–Ω—Ç –≥—Ä–∞—Ñ–∏–∫–∞

plugins/
‚îú‚îÄ‚îÄ echarts.client.ts   # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è ECharts

pages/
‚îú‚îÄ‚îÄ analytics.vue       # –û–±–Ω–æ–≤–ª–µ–Ω–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞ –∞–Ω–∞–ª–∏—Ç–∏–∫–∏

server/
‚îú‚îÄ‚îÄ index.ts           # API endpoints –¥–ª—è –∏—Å—Ç–æ—Ä–∏–∏
```

### API Endpoints

#### `GET /api/telemetry/history`
–ü–æ–ª—É—á–µ–Ω–∏–µ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –≥—Ä–∞—Ñ–∏–∫–æ–≤.

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `range` - –≤—Ä–µ–º–µ–Ω–Ω–æ–π –¥–∏–∞–ø–∞–∑–æ–Ω (10min, 1h, 6h, 12h, 24h)
- `vehicleId` - ID –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–µ—Ö–Ω–∏–∫–∏ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–û—Ç–≤–µ—Ç:**
```json
{
  "success": true,
  "data": [
    {
      "vehicleId": "tractor_001",
      "vehicleName": "–¢—Ä–∞–∫—Ç–æ—Ä –ú–¢–ó-82", 
      "data": [
        {
          "timestamp": 1703123456789,
          "speed": 15.5,
          "temperature": 42.3,
          "battery": 85.2,
          "rpm": 1250
        }
      ]
    }
  ],
  "range": "1h",
  "count": 1
}
```

## üé® –ö–∞—Å—Ç–æ–º–∏–∑–∞—Ü–∏—è

### –¶–≤–µ—Ç–∞ –≥—Ä–∞—Ñ–∏–∫–æ–≤
```javascript
const colors = {
  speed: '#3B82F6',      // –°–∏–Ω–∏–π
  temperature: '#EF4444', // –ö—Ä–∞—Å–Ω—ã–π
  battery: '#10B981',     // –ó–µ–ª–µ–Ω—ã–π
  rpm: '#8B5CF6'         // –§–∏–æ–ª–µ—Ç–æ–≤—ã–π
}
```

### –î–∏–∞–ø–∞–∑–æ–Ω—ã –æ—Å–µ–π Y
```javascript
const yAxisRanges = {
  speed: [0, 50],        // 0-50 –∫–º/—á
  temperature: [0, 100], // 0-100¬∞C
  battery: [0, 100],     // 0-100%
  rpm: [0, 3000]        // 0-3000 RPM
}
```

## üì± –ê–¥–∞–ø—Ç–∏–≤–Ω–æ—Å—Ç—å

- **Desktop**: —Å–µ—Ç–∫–∞ 2x2 –≥—Ä–∞—Ñ–∏–∫–∞
- **Tablet**: —Å–µ—Ç–∫–∞ 1x4 –≥—Ä–∞—Ñ–∏–∫–∞  
- **Mobile**: —Å—Ç–µ–∫ –∏–∑ 4 –≥—Ä–∞—Ñ–∏–∫–æ–≤

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

- **–û—Ç–∫–ª—é—á–µ–Ω–∞ –∞–Ω–∏–º–∞—Ü–∏—è** –¥–ª—è faster rendering
- **Debounce –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π** –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è —Ñ–ª–∏–∫–∫–µ—Ä–∞
- **Lazy loading** –≥—Ä–∞—Ñ–∏–∫–æ–≤ –ø—Ä–∏ —Å–∫—Ä–æ–ª–ª–µ
- **Memory cleanup** –ø—Ä–∏ —Ä–∞–∑–º–æ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–∏–∏

## üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞

### –ò–∑–º–µ–Ω–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–≤–∞–ª–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è
```javascript
// –í useChartData.ts
const UPDATE_INTERVAL = 5000 // 5 —Å–µ–∫—É–Ω–¥
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –Ω–æ–≤–æ–≥–æ —Ç–∏–ø–∞ –≥—Ä–∞—Ñ–∏–∫–∞
1. –î–æ–±–∞–≤–∏—Ç—å —Ç–∏–ø –≤ `ChartComponent.vue`:
```javascript
const configs = {
  // ... —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ
  fuel: {
    color: '#F59E0B',
    yMax: 100,
    unit: '–ª',
    formatValue: (value) => `${value.toFixed(1)} –ª`
  }
}
```

2. –û–±–Ω–æ–≤–∏—Ç—å API –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –¥–∞–Ω–Ω—ã—Ö `fuel`

3. –î–æ–±–∞–≤–∏—Ç—å –≥—Ä–∞—Ñ–∏–∫ –≤ `analytics.vue`

## üêõ –û—Ç–ª–∞–¥–∫–∞

### –ö–æ–Ω—Å–æ–ª—å–Ω—ã–µ –ª–æ–≥–∏
- `Analytics: –°—Ç—Ä–∞–Ω–∏—Ü–∞ —Å ECharts –∑–∞–≥—Ä—É–∂–µ–Ω–∞`
- `Chart data fetch error:` - –æ—à–∏–±–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö
- `–û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –≥—Ä–∞—Ñ–∏–∫–∞:` - –ø—Ä–æ–±–ª–µ–º—ã —Å ECharts

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö
```javascript
// –í –±—Ä–∞—É–∑–µ—Ä–Ω–æ–π –∫–æ–Ω—Å–æ–ª–∏
console.log(window.$nuxt.$chartData.chartData.value)
```

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

ECharts: Apache License 2.0
MapMon: MIT License 