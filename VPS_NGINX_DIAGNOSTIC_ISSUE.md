# üö® VPS NGINX –î–ò–ê–ì–ù–û–°–¢–ò–ß–ï–°–ö–ê–Ø –ü–†–û–ë–õ–ï–ú–ê

## üìã –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –¥–ª—è –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞

### üéØ **–ó–∞–¥–∞—á–∞ –¥–ª—è Claude —Å Context7:**

1. **–ò–∑—É—á–∏ —Ñ–∞–π–ª—ã –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏ VPS** –≤ –ø–∞–ø–∫–µ `/diagnosticVPS/`:
   - `1.md` - –°–∏—Å—Ç–µ–º–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è Ubuntu 22.04.5 LTS
   - `2.md` - Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–ö–†–ò–¢–ò–ß–ù–û!)
   - `net.md` - –°–µ—Ç–µ–≤—ã–µ –ø–æ—Ä—Ç—ã –∏ API —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ  
   - `pm2.md` - PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã –∏ –ª–æ–≥–∏
   - `testlogg.md` - –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API —ç–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤

2. **–ò—Å–ø–æ–ª—å–∑—É–π MCP Context7** –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞:
   - Nginx –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∏ troubleshooting
   - SSL/TLS –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å Let's Encrypt
   - Proxy pass –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
   - Linux —Å–∏—Å—Ç–µ–º–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### üîç **–ö–ª—é—á–µ–≤–∞—è –ø—Ä–æ–±–ª–µ–º–∞:**

**Nginx –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Å–∫–æ–Ω—Ñ–∏–≥—É—Ä–∏—Ä–æ–≤–∞–Ω, –Ω–æ –ù–ï –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç `/api/` –∑–∞–ø—Ä–æ—Å—ã:**

```nginx
# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ü–†–ê–í–ò–õ–¨–ù–ê–Ø (sites-enabled/mapmon:134):
location /api/ {
    proxy_pass http://127.0.0.1:3001;
}
```

**–ù–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ù–ï–ü–†–ê–í–ò–õ–¨–ù–´–ô:**
- ‚úÖ `curl http://localhost:3001/api/status` ‚Üí –†–ê–ë–û–¢–ê–ï–¢ (—Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)
- ‚ùå `curl http://localhost/api/status` ‚Üí 404 Not Found

### üìä **–ß—Ç–æ —É–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚úÖ Ubuntu 22.04.5 LTS (—Å—Ç–∞–±–∏–ª—å–Ω–æ)
- ‚úÖ Nginx 1.18.0 (active, running)
- ‚úÖ PM2 –ø—Ä–æ—Ü–µ—Å—Å—ã (–≤—Å–µ online, 3h uptime)
- ‚úÖ –ü–æ—Ä—Ç—ã 3000, 3001 (–∞–∫—Ç–∏–≤–Ω—ã –∏ –æ—Ç–≤–µ—á–∞—é—Ç)
- ‚úÖ SQLite –ë–î (1.5MB, —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ESP32)
- ‚úÖ SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã Let's Encrypt (–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã)

### üö® **–ß—Ç–æ –ù–ï —Ä–∞–±–æ—Ç–∞–µ—Ç:**
- ‚ùå Nginx proxy –¥–ª—è `/api/` (–≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 404)
- ‚ùå Frontend –ø–æ–ª—É—á–∞–µ—Ç –º–æ–∫–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ –∏–∑ –ø–æ—Ä—Ç–∞ 3000
- ‚ùå –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç "–ù–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤"

### üéØ **–¢—Ä–µ–±—É–µ—Ç—Å—è –æ—Ç Claude:**

1. **–ü—Ä–æ–∞–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Nginx** —Å Context7
2. **–ù–∞–π—Ç–∏ –ø—Ä–∏—á–∏–Ω—É** –ø–æ—á–µ–º—É proxy_pass –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç  
3. **–ü—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã** –¥–ª—è VPS
4. **–î–∞—Ç—å —Ä–µ—à–µ–Ω–∏–µ** –¥–ª—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è Nginx –ø—Ä–æ–∫—Å–∏

### üîß **–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
- SSL redirect –∫–æ–Ω—Ñ–ª–∏–∫—Ç
- –ü–æ—Ä—è–¥–æ–∫ location –±–ª–æ–∫–æ–≤
- –ü—Ä–æ–±–ª–µ–º—ã —Å Let's Encrypt
- –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ Nginx
- –§–∞–π—Ä–≤–æ–ª–ª –∏–ª–∏ iptables
- SELinux (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)

### üí° **–í–∞–∂–Ω—ã–µ –¥–µ—Ç–∞–ª–∏:**
- **–î–æ–º–µ–Ω**: fleetmonitor.ru (—Å SSL)
- **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: ESP32 ‚Üí MQTT ‚Üí SQLite ‚Üí API(3001) ‚Üê Nginx ‚Üê Frontend
- **VPS**: Ubuntu 22.04.5, 2GB RAM, 30GB SSD
- **Nginx**: –≤–µ—Ä—Å–∏—è 1.18.0 —Å Let's Encrypt
- **PM2**: v6.0.8, Node.js v20.19.2

### üìÅ **–ö–æ–º–∞–Ω–¥–∞ –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –Ω–æ–≤–æ–≥–æ —á–∞—Ç–∞:**

```
–ü—Ä–∏–≤–µ—Ç! –ù—É–∂–Ω–∞ –ø–æ–º–æ—â—å —Å –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π –∫—Ä–∏—Ç–∏—á–µ—Å–∫–æ–π –ø—Ä–æ–±–ª–µ–º—ã Nginx –ø—Ä–æ–∫—Å–∏.

–û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û –∏–∑—É—á–∏:
1. /diagnosticVPS/ - –ø–æ–ª–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞ VPS —Å–µ—Ä–≤–µ—Ä–∞
2. CHAT_CONTEXT.md - –∫–æ–Ω—Ç–µ–∫—Å—Ç –ø—Ä–æ–±–ª–µ–º—ã
3. VPS_NGINX_DIAGNOSTIC_ISSUE.md - –æ–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã

–ò—Å–ø–æ–ª—å–∑—É–π MCP Context7 –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞ Nginx –∏ Linux —Å–∏—Å—Ç–µ–º.

–ü—Ä–æ–±–ª–µ–º–∞: Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è, –Ω–æ –Ω–µ –ø—Ä–æ–∫—Å–∏—Ä—É–µ—Ç /api/ –∑–∞–ø—Ä–æ—Å—ã.
–¶–µ–ª—å: –ù–∞–π—Ç–∏ –∏ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –ø—Ä–∏—á–∏–Ω—É, —á—Ç–æ–±—ã –ª–µ–≤–∞—è –ø–∞–Ω–µ–ª—å –ø–æ–ª—É—á–∞–ª–∞ —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ ESP32.
```

---

## üéØ –†–µ–∑—É–ª—å—Ç–∞—Ç –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å:
- ‚úÖ `curl https://fleetmonitor.ru/api/status` ‚Üí —Ä–µ–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
- ‚úÖ –õ–µ–≤–∞—è –ø–∞–Ω–µ–ª—å –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç ESP32_Car_2046
- ‚úÖ –ë–ª–æ–∫–∏ "–ê–∫—Ç–∏–≤–Ω–∞—è —Ç–µ—Ö–Ω–∏–∫–∞" –∏ "–í—Å–µ–≥–æ —Ç–µ—Ö–Ω–∏–∫–∏" —Ä–∞–±–æ—Ç–∞—é—Ç