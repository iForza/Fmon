# üîÑ –ê–ù–ê–õ–ò–ó –û–¢–ö–ê–¢–ê PM2 –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

## üìä –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û –° –ú–û–ú–ï–ù–¢–ê –ù–ê–ß–ê–õ–ê PM2 –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### 1Ô∏è‚É£ **–õ–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** (–∫–æ–º–º–∏—Ç `e1df816`):
- ‚úÖ –ò–∑–º–µ–Ω–∏–ª–∏ `exec_mode` —Å 'cluster' –Ω–∞ 'fork' –¥–ª—è Nuxt
- ‚úÖ –î–æ–±–∞–≤–∏–ª–∏ restart policy (autorestart, max_restarts, min_uptime, restart_delay)
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ memory management (max_memory_restart + NODE_OPTIONS)
- ‚úÖ –£–ª—É—á—à–∏–ª–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ (log_date_format, merge_logs, –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –º–µ—Ç–∫–∏)
- ‚úÖ –í–∫–ª—é—á–∏–ª–∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ PMX –¥–ª—è –≤—Å–µ—Ö –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- ‚úÖ –ù–∞—Å—Ç—Ä–æ–∏–ª–∏ process timeouts (kill_timeout, listen_timeout)
- ‚úÖ –û—Ç–∫–ª—é—á–∏–ª–∏ watch –¥–ª—è production

### 2Ô∏è‚É£ **–ü—Ä–æ–±–ª–µ–º—ã –Ω–∞ VPS —Å–µ—Ä–≤–µ—Ä–µ**:
- ‚ùå **Git merge conflict** –≤ ecosystem.config.cjs (conflict markers `<<<<<<< Updated upstream`)
- ‚ùå **–û—à–∏–±–∫–∞ —Å–±–æ—Ä–∫–∏ Nuxt** –≤ pages/history.vue (—Å—Ç—Ä–æ–∫–∞ 243: `return` –≤–Ω–µ —Ñ—É–Ω–∫—Ü–∏–∏)
- ‚ùå **PM2 –Ω–µ –ø—Ä–∏–º–µ–Ω–∏–ª –Ω–æ–≤—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é** (–ø—Ä–æ—Ü–µ—Å—Å—ã –æ—Å—Ç–∞–ª–∏—Å—å –≤ —Ä–µ–∂–∏–º–µ 'cluster')
- ‚ùå **–°–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏** –ø–æ—Å–ª–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ merge

### 3Ô∏è‚É£ **–ö–æ—Ä–Ω–µ–≤—ã–µ –ø—Ä–∏—á–∏–Ω—ã –ø—Ä–æ–±–ª–µ–º**:

#### A) **Git merge conflicts**:
- –ù–∞ VPS –±—ã–ª–∏ –ª–æ–∫–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ ecosystem.config.cjs –∏ package.json
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π merge —Å–æ–∑–¥–∞–ª conflict markers –≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
- PM2 –Ω–µ —Å–º–æ–≥ –ø—Ä–æ—á–∏—Ç–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é —Å git —Ä–∞–∑–º–µ—Ç–∫–æ–π

#### B) **–ü—Ä–æ–±–ª–µ–º—ã —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ Nuxt + PM2 fork**:
- Nuxt –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –ø—Ä–æ–±–ª–µ–º—ã –ø—Ä–∏ —Å–º–µ–Ω–µ exec_mode —Å cluster –Ω–∞ fork
- –¢—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª–Ω–æ–µ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏–µ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ (pm2 delete all) –≤–º–µ—Å—Ç–æ restart

#### C) **–ü—Ä–æ–±–ª–µ–º—ã –≤ –∫–æ–¥–µ pages/history.vue**:
- Git merge —Å–æ–∑–¥–∞–ª —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫—É—é –æ—à–∏–±–∫—É
- `return` –æ–∫–∞–∑–∞–ª—Å—è –≤–Ω–µ –æ–±–ª–∞—Å—Ç–∏ –≤–∏–¥–∏–º–æ—Å—Ç–∏ —Ñ—É–Ω–∫—Ü–∏–∏
- –ë–ª–æ–∫–∏—Ä–æ–≤–∞–ª —Å–±–æ—Ä–∫—É –≤—Å–µ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞

---

## üîÑ –ß–¢–û –ë–´–õ–û –°–î–ï–õ–ê–ù–û –î–õ–Ø –û–¢–ö–ê–¢–ê

### 1Ô∏è‚É£ **–õ–æ–∫–∞–ª—å–Ω—ã–π –æ—Ç–∫–∞—Ç**:
```bash
git reset --hard 8e71cae  # –û—Ç–∫–∞—Ç –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–º—É –∫–æ–º–º–∏—Ç—É
```

### 2Ô∏è‚É£ **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ GitHub**:
```bash
git push origin master --force  # –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
```

### 3Ô∏è‚É£ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞ —Ä–∞–±–æ—á–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**:
- `exec_mode: 'cluster'` (–∫–∞–∫ –±—ã–ª–æ)
- –ë–∞–∑–æ–≤–æ–µ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –±–µ–∑ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö –æ–ø—Ü–∏–π
- –ü—Ä–æ—Å—Ç—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –±–µ–∑ restart policy

---

## üìã –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

### ‚úÖ **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ**:
- –†–∞–±–æ—á–∞—è PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (ecosystem.config.cjs)
- –ß–∏—Å—Ç–∞—è git –∏—Å—Ç–æ—Ä–∏—è –±–µ–∑ –ø—Ä–æ–±–ª–µ–º–Ω–æ–≥–æ –∫–æ–º–º–∏—Ç–∞
- –°—Ç–∞–±–∏–ª—å–Ω–∞—è –±–∞–∑–∞ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–π —Ä–∞–±–æ—Ç—ã

### ‚ö†Ô∏è **–¢—Ä–µ–±—É–µ—Ç –≤–Ω–∏–º–∞–Ω–∏—è**:
- VPS —Å–µ—Ä–≤–µ—Ä –≤—Å–µ –µ—â–µ –º–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –ø—Ä–æ–±–ª–µ–º–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
- –ù—É–∂–Ω–æ –æ–±–Ω–æ–≤–∏—Ç—å VPS –∏–∑ GitHub –ø–æ—Å–ª–µ –æ—Ç–∫–∞—Ç–∞
- –ü—Ä–æ–±–ª–µ–º—ã PM2 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –æ—Å—Ç–∞–ª–∏—Å—å –Ω–µ—Ä–µ—à–µ–Ω–Ω—ã–º–∏

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò –î–õ–Ø –î–ê–õ–¨–ù–ï–ô–®–ï–ô –†–ê–ë–û–¢–´

### 1Ô∏è‚É£ **–û–±–Ω–æ–≤–∏—Ç—å VPS —Å–µ—Ä–≤–µ—Ä**:
```bash
cd /var/www/mapmon
git pull origin master  # –ü–æ–ª—É—á–∏—Ç—å –æ—Ç–∫–∞—á–µ–Ω–Ω—É—é –≤–µ—Ä—Å–∏—é
pm2 restart ecosystem.config.cjs  # –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ä–∞–±–æ—á—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
```

### 2Ô∏è‚É£ **–ü–æ–¥—Ö–æ–¥ –∫ PM2 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**:
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –ø–æ –æ–¥–Ω–æ–º—É
- –°–Ω–∞—á–∞–ª–∞ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –≤—Å–µ —Å–∏–Ω—Ç–∞–∫—Å–∏—á–µ—Å–∫–∏–µ –æ—à–∏–±–∫–∏
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `pm2 delete all` –≤–º–µ—Å—Ç–æ `restart` –ø—Ä–∏ —Å–º–µ–Ω–µ exec_mode
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å Nuxt —Å PM2 fork mode

### 3Ô∏è‚É£ **–ü–æ—Ä—è–¥–æ–∫ —Ä–µ—à–µ–Ω–∏—è –ø—Ä–æ–±–ª–µ–º**:
1. –ò—Å–ø—Ä–∞–≤–∏—Ç—å –∫–æ–¥ (pages/history.vue, git conflicts)
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å —Å–±–æ—Ä–∫—É –ª–æ–∫–∞–ª—å–Ω–æ
3. –¢–æ–ª—å–∫–æ –∑–∞—Ç–µ–º –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å PM2 –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
4. –ü—Ä–∏–º–µ–Ω—è—Ç—å –∏–∑–º–µ–Ω–µ–Ω–∏—è –Ω–∞ VPS –ø–æ—Å—Ç–µ–ø–µ–Ω–Ω–æ

---

## üö® –ò–ó–í–õ–ï–ß–ï–ù–ù–´–ï –£–†–û–ö–ò

1. **Git merge conflicts** —Ç—Ä–µ–±—É—é—Ç —Ä—É—á–Ω–æ–≥–æ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è
2. **PM2 exec_mode** –∏–∑–º–µ–Ω–µ–Ω–∏—è —Ç—Ä–µ–±—É—é—Ç –ø–æ–ª–Ω–æ–≥–æ –ø–µ—Ä–µ—Å–æ–∑–¥–∞–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤  
3. **Nuxt —Å–±–æ—Ä–∫–∞** –º–æ–∂–µ—Ç –±—ã—Ç—å —á—É–≤—Å—Ç–≤–∏—Ç–µ–ª—å–Ω–∞ –∫ PM2 –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º
4. **–ú–∞—Å—Å–æ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è** —É–≤–µ–ª–∏—á–∏–≤–∞—é—Ç —Ä–∏—Å–∫ –ø—Ä–æ–±–ª–µ–º
5. **–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω–æ** –ø–µ—Ä–µ–¥ VPS deployment –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –≤–∞–∂–Ω–æ

---

**–°–æ–∑–¥–∞–Ω–æ:** –í —Ä–µ–∑—É–ª—å—Ç–∞—Ç–µ –æ—Ç–∫–∞—Ç–∞ PM2 –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏  
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–µ–∫—Ç –≤–æ–∑–≤—Ä–∞—â–µ–Ω –∫ —Å—Ç–∞–±–∏–ª—å–Ω–æ–π –≤–µ—Ä—Å–∏–∏  
**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –û–±–Ω–æ–≤–∏—Ç—å VPS —Å–µ—Ä–≤–µ—Ä –∏–∑ GitHub 