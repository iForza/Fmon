Last login: Tue Jun 17 00:53:49 2025 from 147.45.213.22
root@5018543-bi97187:~# cd /var/www/mapmon
root@5018543-bi97187:/var/www/mapmon# ls -la
total 580
drwxr-xr-x  14 root root   4096 Jun 17 00:35 .
drwxr-xr-x   5 root root   4096 Jun 16 15:49 ..
-rw-r--r--   1 root root  10307 Jun 17 00:30 ADMIN_PANEL_INTEGRATION.md
-rw-r--r--   1 root root  17950 Jun 17 00:34 app.vue
-rw-r--r--   1 root root  31563 Jun 16 03:34 CHANGELOG.md
drwxr-xr-x   2 root root   4096 Jun 17 00:30 components
drwxr-xr-x   2 root root   4096 Jun 17 00:30 composables
-rw-r--r--   1 root root  10882 Jun 17 00:30 DEPLOYMENT_PLAN.md
-rw-r--r--   1 root root    470 Jun 16 03:44 ecosystem.config.cjs
-rw-r--r--   1 root root   1750 Jun 16 03:34 env.example
drwxr-xr-x   4 root root   4096 Jun 16 03:34 esp32
drwxr-xr-x   8 root root   4096 Jun 17 00:34 .git
-rw-r--r--   1 root root    560 Jun 16 03:34 .gitignore
drwxr-xr-x   2 root root   4096 Jun 16 16:03 logs
drwxr-xr-x   9 root root   4096 Jun 16 03:34 MapMon-backup-0.2v
-rw-r--r--   1 root root  37113 Jun 17 00:30 MAPMON_VARIANT4_COMPREHENSIVE_PLAN.md
-rw-r--r--   1 root root  12429 Jun 17 00:30 MAPMON_VPS_DEPLOYMENT_GUIDE.md
-rw-r--r--   1 root root   5232 Jun 16 03:34 MQTT_SETUP.md
drwxr-xr-x 696 root root  20480 Jun 16 03:36 node_modules
drwxr-xr-x   7 root root   4096 Jun 17 00:35 .nuxt
-rw-r--r--   1 root root    707 Jun 16 03:34 nuxt.config.ts
drwxr-xr-x   4 root root   4096 Jun 17 00:36 .output
-rw-r--r--   1 root root    485 Jun 16 03:34 package.json
drwxr-xr-x   2 root root   4096 Jun 16 03:34 pages
drwxr-xr-x   2 root root   4096 Jun 16 03:34 plugins
-rw-r--r--   1 root root  17669 Jun 16 03:34 README.md
drwxr-xr-x   2 root root   4096 Jun 16 03:34 server
-rw-r--r--   1 root root     43 Jun 16 03:34 tsconfig.json
-rw-r--r--   1 root root 331317 Jun 16 03:34 yarn.lock
root@5018543-bi97187:/var/www/mapmon# ps aux | grep node
root       22365  0.2  3.8 1126060 76452 ?       Ssl  Jun16   2:55 node /var/www/mapmon-backend/api-server/index.js
root       22370  0.2  4.4 1268516 89828 ?       Ssl  Jun16   3:04 node /var/www/mapmon-backend/mqtt-collector/index.js
root       27036  0.2  4.6 11537828 93972 ?      Ssl  00:54   1:43 node /var/www/mapmon/.output/server/index.mjs
root       32956  0.0  0.1   6480  2424 pts/0    S+   14:35   0:00 grep --color=auto node
root@5018543-bi97187:/var/www/mapmon# pm2 status
pm2 list
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapmon             │ fork     │ 0    │ online    │ 0%       │ 92.0mb   │
│ 1  │ mapmon-api         │ fork     │ 0    │ online    │ 0%       │ 74.8mb   │
│ 2  │ mqtt-collector     │ fork     │ 0    │ online    │ 0%       │ 87.8mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
┌────┬────────────────────┬──────────┬──────┬───────────┬──────────┬──────────┐
│ id │ name               │ mode     │ ↺    │ status    │ cpu      │ memory   │
├────┼────────────────────┼──────────┼──────┼───────────┼──────────┼──────────┤
│ 0  │ mapmon             │ fork     │ 0    │ online    │ 0%       │ 92.0mb   │
│ 1  │ mapmon-api         │ fork     │ 0    │ online    │ 0%       │ 74.8mb   │
│ 2  │ mqtt-collector     │ fork     │ 0    │ online    │ 0%       │ 87.8mb   │
└────┴────────────────────┴──────────┴──────┴───────────┴──────────┴──────────┘
root@5018543-bi97187:/var/www/mapmon# pm2 describe mapmon
 Describing process with id 0 - name mapmon
┌───────────────────┬──────────────────────────────────────────┐
│ status            │ online                                   │
│ name              │ mapmon                                   │
│ namespace         │ default                                  │
│ version           │ 1.0.0                                    │
│ restarts          │ 0                                        │
│ uptime            │ 13h                                      │
│ entire log path   │ /var/www/mapmon/logs/mapmon-combined.log │
│ script path       │ /var/www/mapmon/.output/server/index.mjs │
│ script args       │ N/A                                      │
│ error log path    │ /var/www/mapmon/logs/mapmon-err.log      │
│ out log path      │ /var/www/mapmon/logs/mapmon-out.log      │
│ pid path          │ /root/.pm2/pids/mapmon-0.pid             │
│ interpreter       │ /usr/bin/node                            │
│ interpreter args  │ N/A                                      │
│ script id         │ 0                                        │
│ exec cwd          │ /var/www/mapmon                          │
│ exec mode         │ fork_mode                                │
│ node.js version   │ 20.19.2                                  │
│ node env          │ production                               │
│ watch & reload    │ ✘                                        │
│ unstable restarts │ 0                                        │
│ created at        │ 2025-06-16T21:54:03.385Z                 │
└───────────────────┴──────────────────────────────────────────┘
 Actions available
┌────────────────────────┐
│ km:heapdump            │
│ km:cpu:profiling:start │
│ km:cpu:profiling:stop  │
│ km:heap:sampling:start │
│ km:heap:sampling:stop  │
└────────────────────────┘
 Trigger via: pm2 trigger mapmon <action_name>

 Code metrics value
┌────────────────────────┬───────────┐
│ Used Heap Size         │ 29.28 MiB │
│ Heap Usage             │ 93.57 %   │
│ Heap Size              │ 31.29 MiB │
│ Event Loop Latency p95 │ 1.21 ms   │
│ Event Loop Latency     │ 0.43 ms   │
│ Active handles         │ 5         │
│ Active requests        │ 0         │
└────────────────────────┴───────────┘
 Divergent env variables from local env
┌────────────────┬────────────────────────────────────────┐
│ SSH_CONNECTION │ 188.162.186.183 36693 147.45.213.22 22 │
│ XDG_SESSION_ID │ 18                                     │
│ SSH_CLIENT     │ 188.162.186.183 36693 22               │
│ SSH_TTY        │ /dev/pts/1                             │
│ OLDPWD         │ /var/www/mapmon                        │
└────────────────┴────────────────────────────────────────┘

 Add your own code metrics: http://bit.ly/code-metrics
 Use `pm2 logs mapmon [--lines 1000]` to display logs
 Use `pm2 env 0` to display environment variables
 Use `pm2 monit` to monitor CPU and Memory usage mapmon
root@5018543-bi97187:/var/www/mapmon# pm2 logs mapmon --lines 50
[TAILING] Tailing last 50 lines for [mapmon] process (change the value with --lines option)
/var/www/mapmon/logs/mapmon-err.log last 50 lines:
0|mapmon   | 2025-06-16T16:03:48: Error: listen EADDRINUSE: address already in use 127.0.0.1:3000
0|mapmon   | 2025-06-16T16:03:48:     at Server.setupListenHandle [as _listen2] (node:net:1908:16)
0|mapmon   | 2025-06-16T16:03:48:     at listenInCluster (node:net:1965:12)
0|mapmon   | 2025-06-16T16:03:48:     at doListen (node:net:2139:7)
0|mapmon   | 2025-06-16T16:03:48:     at processTicksAndRejections (node:internal/process/task_queues:83:21) {
0|mapmon   | 2025-06-16T16:03:48:   code: 'EADDRINUSE',
0|mapmon   | 2025-06-16T16:03:48:   errno: -98,
0|mapmon   | 2025-06-16T16:03:48:   syscall: 'listen',
0|mapmon   | 2025-06-16T16:03:48:   address: '127.0.0.1',
0|mapmon   | 2025-06-16T16:03:48:   port: 3000
0|mapmon   | 2025-06-16T16:03:48: }
0|mapmon   | 2025-06-16T16:03:48: [uncaughtException] Error: listen EADDRINUSE: address already in use 127.0.0.1:3000
0|mapmon   | 2025-06-16T16:03:48:     at Server.setupListenHandle [as _listen2] (node:net:1908:16)
0|mapmon   | 2025-06-16T16:03:48:     at listenInCluster (node:net:1965:12)
0|mapmon   | 2025-06-16T16:03:48:     at doListen (node:net:2139:7)
0|mapmon   | 2025-06-16T16:03:48:     at processTicksAndRejections (node:internal/process/task_queues:83:21) {
0|mapmon   | 2025-06-16T16:03:48:   code: 'EADDRINUSE',
0|mapmon   | 2025-06-16T16:03:48:   errno: -98,
0|mapmon   | 2025-06-16T16:03:48:   syscall: 'listen',
0|mapmon   | 2025-06-16T16:03:48:   address: '127.0.0.1',
0|mapmon   | 2025-06-16T16:03:48:   port: 3000
0|mapmon   | 2025-06-16T16:03:48: }

/var/www/mapmon/logs/mapmon-out.log last 50 lines:
0|mapmon   | 2025-06-17T09:14:35: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T09:16:29: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T09:16:29: Analytics: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T09:16:29: Analytics: Данные техники изменились: []
0|mapmon   | 2025-06-17T09:16:29: Analytics: Обновляем графики для техники: []
0|mapmon   | 2025-06-17T09:16:29: Analytics: Нет данных для графиков
0|mapmon   | 2025-06-17T09:20:24: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T09:30:12: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T09:42:34: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T09:50:49: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T09:52:08: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T09:52:10: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T10:24:59: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T10:25:08: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T10:47:49: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T11:37:04: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T11:55:02: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T12:28:14: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T12:53:10: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T12:59:09: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T13:29:03: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T13:30:10: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T13:43:56: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:01:24: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:01:51: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:03:12: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:03:13: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:03:50: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:03:51: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:04:21: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:04:36: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:04:39: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:07:26: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:07:35: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:08:16: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:09:45: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:12:23: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:14:11: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:15:03: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:15:47: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:15:54: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:18:32: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:22:03: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:22:05: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:22:05: Analytics: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:22:05: Analytics: Данные техники изменились: []
0|mapmon   | 2025-06-17T14:22:05: Analytics: Обновляем графики для техники: []
0|mapmon   | 2025-06-17T14:22:05: Analytics: Нет данных для графиков
0|mapmon   | 2025-06-17T14:24:46: App: MQTT не подключен, ждем подключения...
0|mapmon   | 2025-06-17T14:26:58: App: MQTT не подключен, ждем подключения...

pm2 logs mapmon | grep -i mqtt
tail -f /var/log/nginx/mapmon.access.log
tail -f /var/log/nginx/mapmon.error.log^C
root@5018543-bi97187:/var/www/mapmon# tail -f /var/log/nginx/mapmon.access.log
tail -f /var/log/nginx/mapmon.error.log
78.153.140.177 - - [17/Jun/2025:14:33:08 +0300] "GET /.env-json HTTP/1.1" 400 264 "-" "Opera/9.80 (Linux i686) Presto/2.12.407 Version/12.51"
78.153.140.177 - - [17/Jun/2025:14:33:08 +0300] "GET /.env-salt HTTP/1.1" 400 666 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/50.0.2661.87 Safari/537.36 OPR/37.0.2178.32"
78.153.140.177 - - [17/Jun/2025:14:33:08 +0300] "GET /.env HTTP/1.1" 404 102312 "-" "Mozilla/5.0 (Windows; U; Windows NT 5.1; de) AppleWebKit/522.15.5 (KHTML, like Gecko) Version/3.0.3 Safari/522.15.5"
78.153.140.177 - - [17/Jun/2025:14:33:08 +0300] "GET /.env-ldap HTTP/1.1" 400 666 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_12_1) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/54.0.2840.71 Safari/537.36"
78.153.140.177 - - [17/Jun/2025:14:33:08 +0300] "GET /.env-sqli HTTP/1.1" 400 666 "-" "Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/61.0.3163.79 Safari/537.36"
78.153.140.177 - - [17/Jun/2025:14:33:08 +0300] "GET /.env.conf HTTP/1.1" 400 666 "-" "Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/60.0.3112.101 Safari/537.36"
78.153.140.177 - - [17/Jun/2025:14:33:09 +0300] "GET /.env-lock HTTP/1.1" 400 264 "-" "Mozilla/5.0 (iPhone; CPU iPhone OS 9_3_2 like Mac OS X) AppleWebKit/601.1.46 (KHTML, like Gecko) Version/9.0 Mobile/13F65 Safari/601.1"
78.153.140.177 - - [17/Jun/2025:14:33:09 +0300] "GET /.env-json HTTP/1.1" 404 102337 "-" "Mozilla/5.0 (Macintosh; Intel Mac OS X 10_11_1) AppleWebKit/601.2.7 (KHTML, like Gecko) Version/11.0 Safari/601.2.7"
78.153.140.177 - - [17/Jun/2025:14:33:11 +0300] "GET /.env-salt HTTP/1.1" 404 102337 "-" "Mozilla/4.79 [en] (compatible; MSIE 7.0; Windows NT 5.0; .NET CLR 2.0.50727; InfoPath.2; .NET CLR 1.1.4322; .NET CLR 3.0.04506.30; .NET CLR 3.0.04506.648)"
78.153.140.177 - - [17/Jun/2025:14:33:12 +0300] "GET /.env-ldap HTTP/1.1" 404 102337 "-" "Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.2; WOW64; Trident/6.0; .NET4.0E; .NET4.0C)"
^C
2025/06/17 00:53:55 [error] 22857#22857: *2994 connect() failed (111: Unknown error) while connecting to upstream, client: 150.136.76.116, server: fleetmonitor.ru, request: "GET /index.php?lang=../../../../../../../../usr/local/lib/php/pearcmd&+config-create+/&/<?echo(md5("hi"));?>+/tmp/index1.php HTTP/1.1", upstream: "http://127.0.0.1:3000/index.php?lang=../../../../../../../../usr/local/lib/php/pearcmd&+config-create+/&/<?echo(md5("hi"));?>+/tmp/index1.php", host: "147.45.213.22:443"
2025/06/17 00:53:57 [error] 22857#22857: *2994 connect() failed (111: Unknown error) while connecting to upstream, client: 150.136.76.116, server: fleetmonitor.ru, request: "GET /index.php?lang=../../../../../../../../tmp/index1 HTTP/1.1", upstream: "http://127.0.0.1:3000/index.php?lang=../../../../../../../../tmp/index1", host: "147.45.213.22:443"
2025/06/17 00:53:58 [error] 22857#22857: *2994 connect() failed (111: Unknown error) while connecting to upstream, client: 150.136.76.116, server: fleetmonitor.ru, request: "GET /containers/json HTTP/1.1", upstream: "http://127.0.0.1:3000/containers/json", host: "147.45.213.22:443"
2025/06/17 04:47:58 [crit] 22857#22857: *3298 SSL_do_handshake() failed (SSL: error:0A00006C:SSL routines::bad key share) while SSL handshaking, client: 20.169.105.81, server: 0.0.0.0:443
2025/06/17 05:12:51 [crit] 22857#22857: *3335 SSL_do_handshake() failed (SSL: error:0A00006C:SSL routines::bad key share) while SSL handshaking, client: 212.102.40.218, server: 0.0.0.0:443
2025/06/17 06:24:00 [crit] 22857#22857: *3406 SSL_do_handshake() failed (SSL: error:0A00006C:SSL routines::bad key share) while SSL handshaking, client: 185.242.226.158, server: 0.0.0.0:443
2025/06/17 06:53:13 [crit] 22857#22857: *3476 SSL_do_handshake() failed (SSL: error:0A00006C:SSL routines::bad key share) while SSL handshaking, client: 170.39.218.2, server: 0.0.0.0:443
2025/06/17 07:12:12 [crit] 22857#22857: *3523 SSL_do_handshake() failed (SSL: error:0A00006C:SSL routines::bad key share) while SSL handshaking, client: 170.39.218.2, server: 0.0.0.0:443
2025/06/17 09:30:07 [error] 22857#22857: *3722 connect() failed (111: Unknown error) while connecting to upstream, client: 185.177.72.115, server: fleetmonitor.ru, request: "GET /admin/config?cmd=cat+/root/.aws/credentials HTTP/1.1", upstream: "http://127.0.0.1:3002/config?cmd=cat+/root/.aws/credentials", host: "www.fleetmonitor.ru"
2025/06/17 11:19:50 [crit] 22857#22857: *4000 SSL_do_handshake() failed (SSL: error:0A00006C:SSL routines::bad key share) while SSL handshaking, client: 146.190.57.24, server: 0.0.0.0:443
^C
root@5018543-bi97187:/var/www/mapmon# netstat -tulpn | grep :3000
netstat -tulpn | grep :8084  # EMQX Cloud порт
Command 'netstat' not found, but can be installed with:
apt install net-tools
Command 'netstat' not found, but can be installed with:
apt install net-tools
root@5018543-bi97187:/var/www/mapmon# ss -tuln | grep 8084
lsof -i :8084
COMMAND     PID USER   FD   TYPE DEVICE SIZE/OFF NODE NAME
node\x20/ 22370 root   19u  IPv4 144177      0t0  TCP 5018543-bi97187:37444->228.220.212.35.bc.googleusercontent.com:8084 (ESTABLISHED)
root@5018543-bi97187:/var/www/mapmon# find . -name "*.js" -o -name "*.ts" -o -name "*.vue" | xargs grep -l "mqtt" 2>/dev/null
./node_modules/mqtt-packet/writeToStream.js
./node_modules/mqtt-packet/testRandom.js
./node_modules/mqtt-packet/benchmarks/generateNet.js
./node_modules/mqtt-packet/benchmarks/writeToStream.js
./node_modules/mqtt-packet/benchmarks/parse.js
./node_modules/mqtt-packet/benchmarks/generate.js
./node_modules/mqtt-packet/parser.js
./node_modules/mqtt-packet/test.js
./node_modules/mqtt/build/index.js
./node_modules/mqtt/build/bin/mqtt.js
./node_modules/mqtt/build/bin/pub.js
./node_modules/mqtt/build/bin/sub.js
./node_modules/mqtt/build/lib/shared.d.ts
./node_modules/mqtt/build/lib/store.d.ts
./node_modules/mqtt/build/lib/connect/index.js
./node_modules/mqtt/build/lib/connect/wx.js
./node_modules/mqtt/build/lib/connect/ali.js
./node_modules/mqtt/build/lib/connect/socks.js
./node_modules/mqtt/build/lib/connect/ws.js
./node_modules/mqtt/build/lib/connect/tls.js
./node_modules/mqtt/build/lib/connect/tcp.js
./node_modules/mqtt/build/lib/client.d.ts
./node_modules/mqtt/build/lib/client.js
./node_modules/mqtt/build/mqtt.js
./node_modules/mqtt/build/index.d.ts
./node_modules/mqtt/src/bin/sub.ts
./node_modules/mqtt/src/bin/pub.ts
./node_modules/mqtt/src/lib/handlers/publish.ts
./node_modules/mqtt/src/lib/handlers/auth.ts
./node_modules/mqtt/src/lib/handlers/index.ts
./node_modules/mqtt/src/lib/handlers/pubrel.ts
./node_modules/mqtt/src/lib/handlers/connack.ts
./node_modules/mqtt/src/lib/connect/tls.ts
./node_modules/mqtt/src/lib/connect/index.ts
./node_modules/mqtt/src/lib/connect/ws.ts
./node_modules/mqtt/src/lib/connect/ali.ts
./node_modules/mqtt/src/lib/connect/wx.ts
./node_modules/mqtt/src/lib/connect/socks.ts
./node_modules/mqtt/src/lib/connect/tcp.ts
./node_modules/mqtt/src/lib/store.ts
./node_modules/mqtt/src/lib/default-message-id-provider.ts
./node_modules/mqtt/src/lib/KeepaliveManager.ts
./node_modules/mqtt/src/lib/client.ts
./node_modules/mqtt/src/lib/shared.ts
./node_modules/mqtt/src/index.ts
./node_modules/mqtt/dist/mqtt.js
./node_modules/mqtt/dist/mqtt.min.js
./node_modules/mqtt/dist/mqtt.esm.js
./.output/public/_nuxt/Qr4LuQhN.js
./.output/public/_nuxt/CXS5KS09.js
./.output/server/node_modules/mqtt-packet/writeToStream.js
./.output/server/node_modules/mqtt-packet/parser.js
./.output/server/node_modules/mqtt/build/index.js
./.output/server/node_modules/mqtt/build/lib/connect/index.js
./.output/server/node_modules/mqtt/build/lib/connect/wx.js
./.output/server/node_modules/mqtt/build/lib/connect/ali.js
./.output/server/node_modules/mqtt/build/lib/connect/socks.js
./.output/server/node_modules/mqtt/build/lib/connect/ws.js
./.output/server/node_modules/mqtt/build/lib/connect/tls.js
./.output/server/node_modules/mqtt/build/lib/connect/tcp.js
./.output/server/node_modules/mqtt/build/lib/client.js
./.output/server/node_modules/mqtt/build/mqtt.js
./pages/sidebar.vue
./pages/analytics.vue
./components/AppHeader.vue
./components/AdminPanel.vue
./.nuxt/dist/client/_nuxt/Qr4LuQhN.js
./.nuxt/dist/client/_nuxt/CXS5KS09.js
./.nuxt/dist/server/_nuxt/Accordion-Dm0VBT6C.js
./.nuxt/dist/server/_nuxt/Select-CSdEq5Ft.js
./.nuxt/dist/server/_nuxt/Container-DPz9eqdn.js
./.nuxt/dist/server/_nuxt/Alert-Bfmauho5.js
./.nuxt/dist/server/_nuxt/Range-EDYEkkH9.js
./.nuxt/dist/server/_nuxt/sidebar-B6m-oBqA.js
./.nuxt/dist/server/_nuxt/Checkbox-5pb-mZr9.js
./.nuxt/dist/server/_nuxt/Textarea-BxCE3CJF.js
./.nuxt/dist/server/_nuxt/Meter-DEE9yh6N.js
./.nuxt/dist/server/_nuxt/Pagination-DPx_nuQM.js
./.nuxt/dist/server/_nuxt/Popover-DbNa-Tyd.js
./.nuxt/dist/server/_nuxt/index-BcMvrbYC.js
./.nuxt/dist/server/_nuxt/VerticalNavigation-6ZLZlyjC.js
./.nuxt/dist/server/_nuxt/Progress-CnQ4vybs.js
./.nuxt/dist/server/_nuxt/Slideover-De2io6Xu.js
./.nuxt/dist/server/_nuxt/RadioGroup-bFsuNu3F.js
./.nuxt/dist/server/_nuxt/HorizontalNavigation-DMn5W336.js
./.nuxt/dist/server/_nuxt/Chip-CEqHpW7P.js
./.nuxt/dist/server/_nuxt/AvatarGroup-BDOUZqD2.js
./.nuxt/dist/server/_nuxt/Kbd-M3sD4dgh.js
./.nuxt/dist/server/_nuxt/CommandPaletteGroup-lLV9AmNW.js
./.nuxt/dist/server/_nuxt/CommandPalette-0ZxbIFkc.js
./.nuxt/dist/server/_nuxt/ButtonGroup-CrzBHjdj.js
./.nuxt/dist/server/_nuxt/Form-DL0tLYqY.js
./.nuxt/dist/server/_nuxt/MeterGroup-Ded5AY_n.js
./.nuxt/dist/server/_nuxt/Toggle-CQ8j8YM_.js
./.nuxt/dist/server/_nuxt/Tooltip-T5SFIkPw.js
./.nuxt/dist/server/_nuxt/Carousel-CwsLhbLr.js
./.nuxt/dist/server/_nuxt/error-404-DMtg3K7x.js
./.nuxt/dist/server/_nuxt/Breadcrumb-DV4e4cEo.js
./.nuxt/dist/server/_nuxt/analytics-jg48OWxN.js
./.nuxt/dist/server/_nuxt/ContextMenu-GPUEsthv.js
./.nuxt/dist/server/_nuxt/Skeleton-rVM6L4Gj.js
./.nuxt/dist/server/_nuxt/history-BVcomMb3.js
./.nuxt/dist/server/_nuxt/Notification-DblDJkSG.js
./.nuxt/dist/server/_nuxt/InputMenu-EOic0ZBV.js
./.nuxt/dist/server/_nuxt/Dropdown-Dgibk--7.js
./.nuxt/dist/server/_nuxt/error-500-BVbuQDoF.js
./.nuxt/dist/server/_nuxt/FormGroup-CBTCH_wH.js
./.nuxt/dist/server/_nuxt/Notifications-DXOym4X5.js
./.nuxt/dist/server/_nuxt/Badge-Cp7Ne4V5.js
./.nuxt/dist/server/_nuxt/Tabs-C5BxZtx5.js
./.nuxt/dist/server/_nuxt/Divider-BIS2JgZf.js
./.nuxt/dist/server/_nuxt/SelectMenu-D0xIHp5C.js
./.nuxt/dist/server/_nuxt/Table-DCvDyqN5.js
./composables/useAdmin.ts
./composables/useMqtt.ts
./MapMon-backup-0.2v/pages/sidebar.vue
./MapMon-backup-0.2v/pages/analytics.vue
./MapMon-backup-0.2v/components/AppHeader.vue
./MapMon-backup-0.2v/composables/useMqtt.ts
./MapMon-backup-0.2v/MapMon-backup-0.2v/components/AppHeader.vue
./MapMon-backup-0.2v/MapMon-backup-0.2v/composables/useMqtt.ts
./MapMon-backup-0.2v/MapMon-backup-0.2v/app.vue
./MapMon-backup-0.2v/app.vue
./app.vue
root@5018543-bi97187:/var/www/mapmon# find ./server -name "*.js" -o -name "*.ts" | xargs grep -l "mqtt" 2>/dev/null
root@5018543-bi97187:/var/www/mapmon# cat package.json | grep -i mqtt
    "mqtt": "^5.13.1",
root@5018543-bi97187:/var/www/mapmon# npm list | grep mqtt
├── mqtt@5.13.1
root@5018543-bi97187:/var/www/mapmon# cat nuxt.config.ts | grep -A 10 -B 10 mqtt
root@5018543-bi97187:/var/www/mapmon# ls -la server/api/
find ./server -type f -name "*.ts" -o -name "*.js
ls: cannot access 'server/api/': No such file or directory
> ls -la .output/server/
> ^C
root@5018543-bi97187:/var/www/mapmon# ls -la .output/server/
total 28
drwxr-xr-x  4 root root 4096 Jun 17 00:36 .
drwxr-xr-x  4 root root 4096 Jun 17 00:36 ..
drwxr-xr-x  7 root root 4096 Jun 17 00:36 chunks
-rw-r--r--  1 root root  396 Jun 17 00:36 index.mjs
-rw-r--r--  1 root root  102 Jun 17 00:36 index.mjs.map
drwxr-xr-x 48 root root 4096 Jun 17 00:36 node_modules
-rw-r--r--  1 root root 1818 Jun 17 00:36 package.json
root@5018543-bi97187:/var/www/mapmon# cat ecosystem.config.js
cat: ecosystem.config.js: No such file or directory
root@5018543-bi97187:/var/www/mapmon# env | grep -i mqtt
pm2 env mapmon
[PM2][ERROR] Modules with id mapmon not found
root@5018543-bi97187:/var/www/mapmon# find . -name "*.db" -o -name "*.sqlite" -o -name "*.sqlite3"
root@5018543-bi97187:/var/www/mapmon# systemctl status mongod 2>/dev/null || echo "MongoDB не установлен"
● mongod.service - MongoDB Database Server
     Loaded: loaded (/lib/systemd/system/mongod.service; enabled; vendor preset: enabled)
     Active: active (running) since Mon 2025-06-16 15:48:45 MSK; 22h ago
       Docs: https://docs.mongodb.org/manual
   Main PID: 22023 (mongod)
     Memory: 78.7M
        CPU: 7min 38.345s
     CGroup: /system.slice/mongod.service
             └─22023 /usr/bin/mongod --config /etc/mongod.conf

Jun 16 15:48:45 5018543-bi97187 systemd[1]: Started MongoDB Database Server.
Jun 16 15:48:45 5018543-bi97187 mongod[22023]: {"t":{"$date":"2025-06-16T12:48:45.161Z"},"s":"I",  "c":"CONTROL",  "id":7484500, "ctx":"-","msg":"Environment variable MONGODB_CONFIG_OVERRIDE_NOFORK == 1, overriding \"processManagement.fork\" to false"}
root@5018543-bi97187:/var/www/mapmon# which sqlite3
root@5018543-bi97187:/var/www/mapmon# nslookup o0acf6a7.ala.dedicated.gcp.emqxcloud.com
ping o0acf6a7.ala.dedicated.gcp.emqxcloud.com -c 3
Server:         127.0.0.53
Address:        127.0.0.53#53

Non-authoritative answer:
Name:   o0acf6a7.ala.dedicated.gcp.emqxcloud.com
Address: 35.212.220.228

PING o0acf6a7.ala.dedicated.gcp.emqxcloud.com (35.212.220.228) 56(84) bytes of data.
64 bytes from 228.220.212.35.bc.googleusercontent.com (35.212.220.228): icmp_seq=1 ttl=102 time=178 ms
64 bytes from 228.220.212.35.bc.googleusercontent.com (35.212.220.228): icmp_seq=2 ttl=102 time=177 ms
64 bytes from 228.220.212.35.bc.googleusercontent.com (35.212.220.228): icmp_seq=3 ttl=102 time=177 ms

--- o0acf6a7.ala.dedicated.gcp.emqxcloud.com ping statistics ---
3 packets transmitted, 3 received, 0% packet loss, time 2002ms
rtt min/avg/max/mdev = 177.324/177.491/177.809/0.224 ms
root@5018543-bi97187:/var/www/mapmon# ^C
root@5018543-bi97187:/var/www/mapmon# ss -tuln | grep 8084
netstat -an | grep 8084
Command 'netstat' not found, but can be installed with:
apt install net-tools
root@5018543-bi97187:/var/www/mapmon# htop