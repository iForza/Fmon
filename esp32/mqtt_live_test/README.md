# üì° ESP32 MQTT Live Test

–ü—Ä–æ—Å—Ç–æ–π —Å–∫–µ—Ç—á –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è MQTT –æ—Ç–ª–∞–¥—á–∏–∫–∞ MapMon v0.5

## üîß **–ù–ê–°–¢–†–û–ô–ö–ê:**

1. **–ó–∞–º–µ–Ω–∏—Ç–µ WiFi –¥–∞–Ω–Ω—ã–µ** –≤ `mqtt_live_test.ino`:
```cpp
const char* ssid = "YOUR_WIFI_SSID";      // –í–∞—à WiFi
const char* password = "YOUR_WIFI_PASSWORD"; // –ü–∞—Ä–æ–ª—å WiFi
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–∏** –≤ Arduino IDE:
   - `PubSubClient` by Nick O'Leary
   - `ArduinoJson` by Benoit Blanchon
   - `WiFi` (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ ESP32)

## üì° **–ß–¢–û –û–¢–ü–†–ê–í–õ–Ø–ï–¢:**

### **–¢–µ–ª–µ–º–µ—Ç—Ä–∏—è (–∫–∞–∂–¥—ã–µ 3 —Å–µ–∫) ‚Üí —Ç–æ–ø–∏–∫ `car`:**
```json
{
  "id": "ESP32_Car_2046",
  "lat": 55.7558,
  "lng": 37.6176, 
  "speed": 45,
  "battery": 87.3,
  "temperature": 28.5,
  "rpm": 2250,
  "messageCount": 123
}
```

### **Heartbeat (–∫–∞–∂–¥—ã–µ 15 —Å–µ–∫) ‚Üí `vehicles/ESP32_Car_2046/heartbeat`:**
```json
{
  "device_id": "ESP32_Car_2046",
  "uptime": 1850,
  "rssi": -45,
  "freeHeap": 234567
}
```

### **–°—Ç–∞—Ç—É—Å (–∫–∞–∂–¥—ã–µ 30 —Å–µ–∫) ‚Üí `vehicles/ESP32_Car_2046/status`:**
```json
{
  "device_id": "ESP32_Car_2046", 
  "status": "active",
  "rssi": -45,
  "ip": "192.168.1.100"
}
```

## üéØ **–ö–ê–ö –ò–°–ü–û–õ–¨–ó–û–í–ê–¢–¨:**

1. –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Å–∫–µ—Ç—á –Ω–∞ ESP32
2. –û—Ç–∫—Ä–æ–π—Ç–µ Serial Monitor (115200 baud)
3. –î–æ–∂–¥–∏—Ç–µ—Å—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ WiFi –∏ MQTT
4. –û—Ç–∫—Ä–æ–π—Ç–µ MapMon ‚Üí –ò—Å—Ç–æ—Ä–∏—è ‚Üí MQTT –û—Ç–ª–∞–¥–∫–∞
5. –£–≤–∏–¥–∏—Ç–µ live –¥–∞–Ω–Ω—ã–µ –≤ –∫–æ–Ω—Å–æ–ª–∏ –æ—Ç–ª–∞–¥—á–∏–∫–∞

## ‚ö° **–ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´:**

### **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ MQTT (Linux/Mac):**
```bash
# –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ –≤—Å–µ —Ç–æ–ø–∏–∫–∏ ESP32
mosquitto_sub -h test.mosquitto.org -t "car" -t "vehicles/+/+"

# –¢–æ–ª—å–∫–æ —Ç–µ–ª–µ–º–µ—Ç—Ä–∏—è
mosquitto_sub -h test.mosquitto.org -t "car"
```

### **–û—Ç–ø—Ä–∞–≤–∫–∞ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è:**
```bash
mosquitto_pub -h test.mosquitto.org -t "car" -m '{"test":"message"}'
```

## üêõ **–û–¢–õ–ê–î–ö–ê:**

### **ESP32 –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è –∫ WiFi:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSID –∏ –ø–∞—Ä–æ–ª—å
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ WiFi 2.4GHz (–Ω–µ 5GHz)

### **MQTT –Ω–µ –ø–æ–¥–∫–ª—é—á–∞–µ—Ç—Å—è:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
- test.mosquitto.org –∏–Ω–æ–≥–¥–∞ –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω - –ø–æ–ø—Ä–æ–±—É–π—Ç–µ –ø–æ–∑–∂–µ

### **–î–∞–Ω–Ω—ã–µ –Ω–µ –≤–∏–¥–Ω—ã –≤ –æ—Ç–ª–∞–¥—á–∏–∫–µ:**
- –û—Ç–∫—Ä–æ–π—Ç–µ DevTools ‚Üí Network ‚Üí WS 
- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å test.mosquitto.org:8081
- –ï—Å–ª–∏ –Ω–µ—Ç - –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è –¥–µ–º–æ —Ä–µ–∂–∏–º

## üìä **–û–ñ–ò–î–ê–ï–ú–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢:**

–í MQTT –æ—Ç–ª–∞–¥—á–∏–∫–µ MapMon —É–≤–∏–¥–∏—Ç–µ:
- üü¢ **TELEMETRY**: –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã, —Å–∫–æ—Ä–æ—Å—Ç—å, –±–∞—Ç–∞—Ä–µ—è
- üîµ **HEARTBEAT**: uptime, RSSI, –ø–∞–º—è—Ç—å  
- üü£ **STATUS**: —Å—Ç–∞—Ç—É—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞
- üìà **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞**: –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–æ–æ–±—â–µ–Ω–∏–π –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

---
**–°–æ–∑–¥–∞–Ω–æ –¥–ª—è MapMon v0.5 MQTT Live Debugger** üöÄ 